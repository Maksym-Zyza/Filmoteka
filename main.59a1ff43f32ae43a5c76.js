(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2mXJ":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,i){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                    "+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"name")||(null!=t?o(t,"name"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:29,column:20},end:{line:29,column:28}}}):r)+"&nbsp;&nbsp;\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var r,o=e.lambda,l=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\x3c!-- Шаблон модалки одного фильма --\x3e\r\n\r\n<div class="movie-container">\r\n    <div class="movie-image">\r\n        <img src="'+l(o(null!=t?s(t,"img"):t,t))+'" alt="'+l(o(null!=t?s(t,"title"):t,t))+'">\r\n    </div>\r\n    <div class="movie-description">\r\n        <h1 class="movie-description-title">'+l(o(null!=t?s(t,"title"):t,t))+'</h1>\r\n        <div class="movie-description-block">\r\n            <ul class="movie-description-list-left">\r\n                <li class="movie-description-list-left-item">Vote / Votes</li>\r\n                <li class="movie-description-list-left-item">Popularity</li>\r\n                <li class="movie-description-list-left-item">Original title</li>\r\n                <li class="movie-description-list-left-item">Genre</li>\r\n            </ul>\r\n            <ul class="movie-description-list-right">\r\n                <li class="movie-description-list-right-item">\r\n                    <span class="movie-rating filler">'+l(o(null!=t?s(t,"vote_average"):t,t))+'</span> /\r\n                    <span class="movie-vote-count filler">'+l(o(null!=t?s(t,"vote_count"):t,t))+'</span>\r\n                </li>\r\n                <li class="movie-description-list-right-item">\r\n                    '+l(o(null!=t?s(t,"popularity"):t,t))+'\r\n                </li>\r\n                <li class="movie-description-list-right-item">\r\n                    <span class="original-title">'+l(o(null!=t?s(t,"original_title"):t,t))+'</span>\r\n                </li>\r\n                <li class="movie-description-list-right-item">\r\n'+(null!=(r=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"genres"):t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:28,column:20},end:{line:30,column:29}}}))?r:"")+'                </li>\r\n            </ul>\r\n        </div>\r\n        <div class="movie-about">\r\n            <p class="movie-about-title">ABOUT</p>\r\n            <p class="movie-about-text">'+l(o(null!=t?s(t,"overview"):t,t))+'</p>\r\n        </div>\r\n        <button class="add-to-watched active-btn-style" type="button" data-action-watched="watched"\r\n            data-movie-id="'+l(o(null!=t?s(t,"id"):t,t))+'">ADD TO\r\n            WATCHED</button>\r\n        <button class="add-to-queue active-btn-style" type="button" data-action-queue="queue"\r\n            data-movie-id="'+l(o(null!=t?s(t,"id"):t,t))+'">ADD TO\r\n            QUEUE</button>\r\n    </div>\r\n</div>'},useData:!0})},"Dv/5":function(e,t,n){},Dywu:function(e,t,n){e.exports=n.p+"img/empty-img.jpg"},GwTD:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="btn-wrapper">\r\n  <button id="watched-film-btn" data-watched-film-btn="watch-btn" class="btn btn-active-style" disabled>Watched</button>\r\n  <button id="watched-queue-btn" data-queue-film-btn="queue-btn" class="btn btn-nonactive-style">queue</button>\r\n</div>'},useData:!0})},QfWi:function(e,t,n){"use strict";var a;n.r(t);var i=function(e){var t;return function(n){return void 0===n&&(n=!1),t&&!n||(t=document.querySelector(e)),t}},r=((a={headerBtnWrapper:i("div.btn-wrapper"),body:document.querySelector("body"),upBtn:document.querySelector(".up-btn-wrapper"),gallery:document.querySelector("#gallery"),form:document.querySelector(".search-form"),input:document.querySelector(".search-field"),modalDiv:document.querySelector(".js-lightbox"),lightbox:document.querySelector(".lightbox"),overlayDiv:document.querySelector(".lightbox__overlay"),btnClose:document.querySelector(".lightbox__btn"),modalDivContent:document.querySelector(".lightbox__content"),libraryButton:document.querySelector(".library-ref"),container:document.getElementById(".container"),header:document.querySelector("#page-header"),galleryList:document.querySelector(".gallery"),watchedBtn:document.querySelector("#watched-film-btn"),homeBtn:document.querySelector(".home-ref"),pagination:document.querySelector(".pagination"),btnPage1:document.querySelector(".btn-page1"),btnPage2:document.querySelector(".btn-page2"),btnPage3:document.querySelector(".btn-page3"),btnPage4:document.querySelector(".btn-page4"),btnPage5:document.querySelector(".btn-page5"),previous:document.querySelector(".previous"),next:document.querySelector(".next"),dots1:document.querySelector(".js-dots1"),dots2:document.querySelector(".js-dots2"),queueBtn:i("#watched-queue-btn")}).watchedBtn=i("#watched-film-btn"),a.delMovieBtn=document.querySelectorAll("#delMovieBtn"),a.addToWatched=i(".add-to-watched"),a.addToQueue=i(".add-to-queue"),a.signIn=document.querySelector("#sign_in"),a.signOut=document.querySelector("#sign_out"),a.userInfo=document.querySelector(".user-info"),a.searchBtn=document.querySelector(".search-btn"),a);!function(){var e={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector(".team-modal-close-button"),modal:document.querySelector(".backdrop")};function t(){r.body.classList.remove("scroll-hidden"),e.closeModalBtn.removeEventListener("click",t),e.modal.classList.add("is-hidden"),e.modal.removeEventListener("click",t),window.removeEventListener("keydown",n)}function n(e){"Escape"===e.code&&t()}function a(e){e.currentTarget===e.target&&t()}e.openModalBtn.addEventListener("click",(function(){e.modal.classList.remove("is-hidden"),window.addEventListener("keydown",n),e.closeModalBtn.addEventListener("click",t),e.modal.addEventListener("click",a),r.body.classList.add("scroll-hidden")}))}();n("Dv/5"),n("lYjL"),n("IvQZ"),n("8cZI"),n("lmye"),n("WB5j"),n("Xlt+"),n("D/wG"),n("JBxO"),n("FdtR"),n("QDHd"),n("Muwe"),n("4NM0"),n("aZFp");var o=n("v+qO"),l=n.n(o);var s=function(e){var t="";"404"!==e.status&&(t=l()(e)),r.gallery.insertAdjacentHTML("beforeend",t)};n("RtS0"),n("fp7Y"),n("3dw1"),n("X5mX");var c=function(e){return fetch("https://api.themoviedb.org/3/search/movie?api_key=50b81e1c6c3b9e5f74d2015b742ff0b0&language=en-US&page="+g+"&include_adult=false&query="+e).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},u=(n("bzha"),n("QJ3N"));n("zrP5");var d=function(e){u.notice({text:"The movie has been added to the "+e+" list",icon:!0,styling:"custom",delay:700,overlayClosesPinned:!0})},m=n("ZEAl"),v={lines:15,length:0,width:10,radius:31,scale:1.25,corners:1,speed:1.4,rotate:0,animation:"spinner-line-fade-default",direction:1,color:"#FF6B08",fadeColor:"transparent",top:"42%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"},p="";var h=function(){r.form.addEventListener("submit",(function(e){if(e.preventDefault(),p=e.currentTarget.elements.search.value,console.log(p),r.gallery.innerHTML="",""===r.input.value)return r.pagination.classList.add("visually-hidden"),u.error({text:"Please, fill in the query field",icon:!0,styling:"custom",delay:2e3,overlayClosesPinned:!0}),void(r.gallery.innerHTML="");var t=document.getElementById("gallery"),n=new m.a(v).spin(t);c(p).then((function(e){var t=e.results;if(console.log("search",{results:t}),0===t.length)return u.error({text:"There was found nothing for your query",icon:!0,styling:"custom",delay:2e3,overlayClosesPinned:!0}),r.pagination.classList.add("visually-hidden"),void n.stop();r.pagination.classList.remove("visually-hidden"),x().then((function(e){var n=e.genres;L(t,n)})).finally((function(){n.stop()}))}))}))};var f=function(){r.gallery.innerHTML="",p.length>0?r.searchBtn.click():q()};r.pagination.addEventListener("click",(function(e){if("BUTTON"===e.target.tagName){var t=e.target.dataset.index;g=Number(t),r.previous.hidden=!0,r.dots1.hidden=!0;var n=r.btnPage1,a=r.btnPage2,i=r.btnPage3,o=r.btnPage4,l=r.btnPage5,s=r.previous,c=r.next;e.target.classList.contains("next")&&g<999&&(y.forEach((function(e){return e.classList.remove("active")})),n.classList.add("active"),c.dataset.index=Number(c.dataset.index)+5,n.textContent=Number(n.textContent)+5,a.textContent=Number(a.textContent)+5,i.textContent=Number(i.textContent)+5,o.textContent=Number(o.textContent)+5,l.textContent=Number(l.textContent)+5,n.dataset.index=Number(n.dataset.index)+5,a.dataset.index=Number(a.dataset.index)+5,i.dataset.index=Number(i.dataset.index)+5,o.dataset.index=Number(o.dataset.index)+5,l.dataset.index=Number(l.dataset.index)+5,g=c.dataset.index),s.dataset.index=g,e.target.classList.contains("previous")&&g>5&&(c.dataset.index=Number(c.dataset.index)-5,s.dataset.index=c.dataset.index,n.textContent=Number(n.textContent)-5,a.textContent=Number(a.textContent)-5,i.textContent=Number(i.textContent)-5,o.textContent=Number(o.textContent)-5,l.textContent=Number(l.textContent)-5,n.dataset.index=Number(n.dataset.index)-5,a.dataset.index=Number(a.dataset.index)-5,i.dataset.index=Number(i.dataset.index)-5,o.dataset.index=Number(o.dataset.index)-5,l.dataset.index=Number(l.dataset.index)-5,g=s.dataset.index),console.log("currentPage>",g),e.target.classList.contains("btn")&&function(e){var t=e.target;y.forEach((function(e){return e.classList.remove("active")})),t.classList.contains("btn")&&t.classList.add("active")}(e),f()}Number(g)>5&&(r.previous.hidden=!1,r.dots1.hidden=!1);Number(g)>995&&(r.next.hidden=!0,r.dots2.hidden=!0)}));var g=1;r.previous.hidden=!0,r.dots1.hidden=!0;var y=document.querySelectorAll(".btn");var b=n("Dywu"),w=n.n(b);function x(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=50b81e1c6c3b9e5f74d2015b742ff0b0").then((function(e){return e.json()}))}function L(e,t){e.map((function(e){var n=e.id,a=e.poster_path,i=e.title,r=e.release_date,o=e.genre_ids,l=t.filter((function(e){return o.includes(e.id)})).map((function(e){return e.name}));l.length>3&&l.splice(3,0,"Other");var c=l.slice(0,4).join(", "),u=r.split("-")[0],d=a?"https://image.tmdb.org/t/p/w500"+a:w.a;s([{id:n,img:d,title:i,movieGenres:c,releaseDate:u}])}))}var q=function(){var e="https://api.themoviedb.org/3/trending/movie/week?api_key=50b81e1c6c3b9e5f74d2015b742ff0b0&page="+g,t=document.getElementById("gallery"),n=new m.a(v).spin(t);return fetch(e).then((function(e){return e.json()})).then((function(e){var t=e.results;x().then((function(e){var n=e.genres;L(t,n)})).finally((function(){n.stop()}))}))};n("Sokc");var k=function(e){var t="https://api.themoviedb.org/3/movie/"+e+"?api_key=50b81e1c6c3b9e5f74d2015b742ff0b0",n=document.querySelector(".lightbox__content"),a=new m.a(v).spin(n);return fetch(t).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).finally((function(){a.stop()}))},S=n("2mXJ"),B=n.n(S);var E=function(e){var t="";"404"!==e.status&&(e.popularity=Math.round(e.popularity),t=B()(e)),r.modalDivContent.insertAdjacentHTML("beforeend",t)},T=n("SzhR"),C=(n("VwVG"),n("SHTW"),{apiKey:"AIzaSyB5lNJzTc-Z4QORSfsSo5KzvK6lek8SvPI",authDomain:"filmoteka-team05.firebaseapp.com",projectId:"filmoteka-team05",storageBucket:"filmoteka-team05.appspot.com",messagingSenderId:"689167922546",appId:"1:689167922546:web:27596dcde99cd690ab99eb",measurementId:"G-5VVKZRMCCH",databaseURL:"https://filmoteka-team05-default-rtdb.firebaseio.com"}),_=(n("y89P"),n("GwTD")),A=n.n(_),D=n("mZ/l"),N=n.n(D);var P=function(){console.log(r.galleryList.hasChildNodes()),r.galleryList.hasChildNodes()||(r.gallery.innerHTML="",r.galleryList.classList.add("empty-page-style"),r.galleryList.classList.remove("gallery"),r.gallery.innerHTML='<li><h2>EMPTY<h2><p>Nothing has been added yet :(</p><img class="image" data-empty-page="empty-page" src='+N.a+' alt="empty page pic"></li>')},M=(n("/YXa"),n("WoWj"),n("U00V"),n("wcNg"),n("SJqc")),O=n.n(M);n("hi3g"),n("uQK7");function j(){u.notice({text:"Please sign in first",icon:!0,styling:"custom",delay:1500,overlayClosesPinned:!0})}function U(e,t){T.a.database().ref("users/"+e).update({queue:t},(function(e){e?console.log("Failed!"):console.log("Data added successfully!")}))}function I(e,t){T.a.database().ref("users/"+e).update({watched:t},(function(e){e?console.log("Failed!"):console.log("Data added successfully!")}))}var H=function(e,t){"#library"===window.location.hash&&function(e,t){ie(e).then((function(e){return e.val()})).then((function(n){if(n.watched){var a=n.watched||[];if(a.includes(t)){var i=a.indexOf(t);a.splice(i,1),console.log("new watched",a)}I(e,[].concat(a)),r.gallery.innerHTML="",G(e)}}))}(t,e.id),"#queue"===window.location.hash&&function(e,t){ie(e).then((function(e){return e.val()})).then((function(n){if(n.queue){var a=n.queue||[];if(a.includes(t)){var i=a.indexOf(t);a.splice(i,1),console.log(i),console.log("new queue",a)}U(e,[].concat(a)),r.gallery.innerHTML="",Q(e)}}))}(t,e.id)};function R(e,t,n,a,i,r,o){try{var l=e[r](o),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,i)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){R(r,a,i,o,l,"next",e)}function l(e){R(r,a,i,o,l,"throw",e)}o(void 0)}))}}function G(e){ie(e).then((function(e){return e.val()})).then(function(){var e=W(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.pagination.setAttribute("hidden","true"),!t.watched){e.next=10;break}return n=t.watched,e.next=5,Promise.all(n.map(function(){var e=W(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/"+t+"?api_key=50b81e1c6c3b9e5f74d2015b742ff0b0&");case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=e.sent,r.gallery.innerHTML="",a.map((function(e){var t=e.id,n=e.name,a=e.poster_path,i=e.title,r=e.release_date,o=e.genres,l=e.vote_average,s=r.split("-")[0],c=o.map((function(e){return e.name})).join(", ");F([{id:t,name:n,img:a?"https://image.tmdb.org/t/p/w500"+a:emptyJpg,title:i,releaseDate:s,movieGenres:c,vote_average:l}])})),e.next=11;break;case 10:P();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function Q(e){ie(e).then((function(e){return e.val()})).then(function(){var e=W(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.pagination.setAttribute("hidden","true"),!t.queue){e.next=9;break}return n=t.queue,e.next=5,Promise.all(n.map(function(){var e=W(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/"+t+"?api_key=50b81e1c6c3b9e5f74d2015b742ff0b0&");case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:e.sent.map((function(e){var t=e.id,n=e.name,a=e.poster_path,i=e.title,r=e.release_date,o=e.genres,l=e.vote_average,s=r.split("-")[0],c=o.map((function(e){return e.name})).join(", ");F([{id:t,name:n,img:a?"https://image.tmdb.org/t/p/w500"+a:emptyJpg,title:i,releaseDate:s,movieGenres:c,vote_average:l}])})),e.next=10;break;case 9:P();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function F(e){var t="";"404"!==e.status&&(t=O()(e)),r.gallery.insertAdjacentHTML("beforeend",t)}r.gallery.addEventListener("click",(function(e){if(e.target.classList.contains("delMovieBtn")){var t=e.target;console.log("Hello");var n=T.a.auth().currentUser.uid;H(t,n)}}));n("KzXF");function J(){window.location.hash="#queue",r.gallery.innerHTML="",T.a.auth().currentUser.uid&&(r.gallery.classList.contains("empty-page-style")&&(r.gallery.classList.remove("empty-page-style"),r.gallery.classList.add("gallery")),Q(T.a.auth().currentUser.uid),z(r.queueBtn()),z(r.watchedBtn()),r.queueBtn().setAttribute("disabled",!0),r.watchedBtn().removeAttribute("disabled"))}function z(e){["btn-nonactive-style","btn-active-style"].map((function(t){return e.classList.toggle(t)}))}r.homeBtn.addEventListener("click",(function(){r.libraryButton.classList.contains("activ-link-style")&&(r.homeBtn.classList.add("activ-link-style"),r.libraryButton.classList.remove("activ-link-style"))}));var Y,Z=function(){r.homeBtn.classList.contains("activ-link-style")&&(r.homeBtn.classList.remove("activ-link-style"),r.libraryButton.classList.add("activ-link-style")),"#library"===window.location.hash&&(r.pagination.setAttribute("hidden","true"),r.gallery.innerHTML="",G(T.a.auth().currentUser.uid)),"#queue"===window.location.hash&&(r.pagination.setAttribute("hidden","true"),r.gallery.innerHTML="",J())},V=document.querySelector("#page-header"),X=document.querySelector(".library-ref"),K=document.querySelector(".search-form"),$=document.querySelector(".ref-wrapper");document.querySelector(".remove");Y=A()();var ee=function(){K.remove();var e=r.headerBtnWrapper(!0);e&&(e.innerHTML=""),$.insertAdjacentHTML("afterend",Y),V.classList.replace("page-header","page-header-library")};X.addEventListener("click",(function(){T.a.auth().currentUser&&ee()}));var te=function(){location.hash&&(ee(),Z())};var ne,ae=function(){location.hash?T.a.auth().currentUser?te():j():q()};function ie(e){return T.a.database().ref("/users/"+e).once("value")}function re(e){var t=T.a.auth().currentUser;t&&ie(t.uid).then((function(e){return e.val()})).then((function(t){if(t.watched||t.queue){console.log("we are in!");var n=t.watched,a=t.queue;console.log("ok");var i=r.addToWatched(!0),o=r.addToQueue(!0);n.includes(e)&&i.classList.contains("active-btn-style")&&(i.classList.remove("active-btn-style"),i.classList.add("inactive-btn-style"),i.textContent="ALREADY IN WATCHED",i.setAttribute("disabled","true")),a.includes(e)&&o.classList.contains("active-btn-style")&&(o.classList.remove("active-btn-style"),o.classList.add("inactive-btn-style"),o.textContent="ALREADY IN QUEUE",o.setAttribute("disabled","true"))}}))}function oe(){window.removeEventListener("keydown",le),r.modalDiv.classList.remove("is-open"),r.body.classList.remove("scroll-hidden"),r.upBtn.hidden=!1}function le(e){"Escape"===e.code&&oe()}T.a.initializeApp(C),r.signIn.addEventListener("click",(function(){var e=new T.a.auth.GoogleAuthProvider;T.a.auth().signInWithPopup(e).then((function(e){e.credential.accessToken;var t=e.user,n=t.uid,a=t.displayName,i=t.email,r=t.photoURL;console.log(t),console.log("Success!"),function(){var e=T.a.auth().currentUser.uid;return T.a.database().ref("/users/"+e).once("value")}().then((function(e){e.exists()?(console.log("User exist in database"),ie(n)):(console.log("User NOT exist in database"),function(e,t,n,a){database.ref("users/"+e).set({username:t,email:n,profile_picture:a},(function(e){e?console.log("Failed!"):console.log("User data saved successfully!")}))}(n,a,i,r))}))})).catch((function(e){e.code;var t=e.message;e.email,e.credential;console.log(t),console.log("Failed!")}))})),r.signOut.addEventListener("click",(function(){T.a.auth().signOut().then((function(){console.log("Sign-out successful."),window.location.href="index.html",ae()})).catch((function(e){console.log("An error happened")}))})),r.gallery.addEventListener("click",(function(e){e.target===document.querySelectorAll(".movie-poster-lib")&&console.log(e.target);if("IMG"!==e.target.nodeName)return;if(e.target.dataset.emptyPage)return;var t=e.target;t.dataset.src;!function(e){window.addEventListener("keydown",le),r.modalDiv.classList.add("is-open"),r.body.classList.add("scroll-hidden"),r.upBtn.hidden=!0,r.modalDivContent.innerHTML="",k(e).then((function(e){var t=e.id,n=e.poster_path,a=e.title,i=e.release_date,r=e.genre_ids,o=e.vote_average,l=e.vote_count,s=e.original_title,c=e.genres,u=e.overview,d=e.popularity,m=n?"https://image.tmdb.org/t/p/w500"+n:w.a;E({id:t,title:a,release_date:i,genre_ids:r,img:m,vote_average:o,vote_count:l,original_title:s,genres:c,overview:u,popularity:d})})).then((function(){return re(e)}))}(t.dataset.movieId)})),r.gallery.addEventListener("click",(function(e){re(e.movieId)})),r.btnClose.addEventListener("click",oe),r.overlayDiv.addEventListener("click",oe),h(),r.libraryButton.addEventListener("click",(function(){r.pagination.setAttribute("hidden","true"),r.gallery.innerHTML="",T.a.auth().currentUser?(G(T.a.auth().currentUser.uid),r.homeBtn.classList.contains("activ-link-style")&&(r.homeBtn.classList.remove("activ-link-style"),r.libraryButton.classList.add("activ-link-style")),r.queueBtn().classList.contains("btn-active-style")&&(console.log("hello"),z(r.queueBtn()),z(r.watchedBtn()),r.queueBtn().toggleAttribute("disabled"),r.watchedBtn().toggleAttribute("disabled"))):j()})),r.header.addEventListener("click",(function(e){e.target.dataset.queueFilmBtn&&J(),e.target.dataset.watchedFilmBtn&&(window.location.hash="#library",r.gallery.innerHTML="",T.a.auth().currentUser?G(T.a.auth().currentUser.uid):j(),z(r.watchedBtn()),z(r.queueBtn()),r.queueBtn().removeAttribute("disabled"),r.watchedBtn().setAttribute("disabled",!0))})),r.lightbox.addEventListener("click",(function(e){if(e.target.dataset.actionWatched){var t=T.a.auth().currentUser;if(t){var n=t.uid,a=e.target.dataset.movieId,i=r.addToWatched(!0);ie(n).then((function(e){return e.val()})).then((function(e){var t=e.watched||[];t.includes(a)||(I(n,[].concat(t,[a])),d("WATCHED"))})),i.classList.contains("active-btn-style")&&(i.classList.remove("active-btn-style"),i.classList.add("inactive-btn-style"),i.textContent="ALREADY IN WATCHED",i.setAttribute("disabled","true"))}else j()}if(e.target.dataset.actionQueue){var o=T.a.auth().currentUser;if(o){var l=o.uid,s=e.target.dataset.movieId,c=r.addToQueue(!0);ie(l).then((function(e){return e.val()})).then((function(e){var t=e.queue||[];t.includes(s)||(U(l,[].concat(t,[s])),d("QUEUE"))})),c.classList.contains("active-btn-style")&&(c.classList.remove("active-btn-style"),c.classList.add("inactive-btn-style"),c.textContent="ALREADY IN QUEUE",c.setAttribute("disabled","true"))}else j()}})),ne=ae,T.a.auth().onAuthStateChanged((function(e){if(e){var t=e.displayName,n=(e.photoURL,e.uid);r.signOut.hidden=!1,r.signIn.hidden=!0,console.log("Current user: "+t,"userId: "+n),ie(n)}else r.signOut.hidden=!0,r.signIn.hidden=!1;ne()}));var se,ce=n("yWWw"),ue=n.n(ce),de=document.querySelector("[data-up-btn]");window.addEventListener("scroll",ue()((se=de,function(e){pageYOffset<document.documentElement.clientHeight?se.classList.add("visually-hidden"):se.classList.remove("visually-hidden")}),250)),de.addEventListener("click",(function(e){window.scrollTo({top:0,behavior:"smooth"})}))},SJqc:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,i){var r,o=e.lambda,l=e.escapeExpression,s=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="movie-card">\r\n    <div class="movie-wrapper">\r\n        <img class="movie-poster-lib" src="'+l(o(null!=t?u(t,"img"):t,t))+'" alt="'+l("function"==typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:c)?r.call(s,{name:"title",hash:{},data:i,loc:{start:{line:4,column:62},end:{line:4,column:71}}}):r)+'" data-movie-id="'+l("function"==typeof(r=null!=(r=u(n,"id")||(null!=t?u(t,"id"):t))?r:c)?r.call(s,{name:"id",hash:{},data:i,loc:{start:{line:4,column:88},end:{line:4,column:94}}}):r)+'">\r\n        <button class="delMovieBtn" id='+l(o(null!=t?u(t,"id"):t,t))+'>x</button>\r\n    </div>\r\n\r\n    <div class="movie-title-wrapper">\r\n        <h1 class="movie-title">'+l(o(null!=t?u(t,"title"):t,t))+'</h1>\r\n\r\n    </div>\r\n    <div class="info-wrapper">\r\n        <p class="movie-info">\r\n            '+l(o(null!=t?u(t,"movieGenres"):t,t))+" | "+l(o(null!=t?u(t,"releaseDate"):t,t))+'\r\n        </p>\r\n        <p class="vote">'+l(o(null!=t?u(t,"vote_average"):t,t))+"</p>\r\n\r\n    </div>\r\n\r\n</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var r;return null!=(r=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:21,column:9}}}))?r:""},useData:!0})},Sokc:function(e,t){var n=document.querySelector("body"),a=document.querySelector(".theme-switch__toggle"),i=document.querySelector(".lightbox__content"),r="light-theme",o="dark-theme";a.addEventListener("change",(function(){n.classList.remove(r,o),i.classList.remove(r,o),a.checked?(localStorage.setItem("Theme","darkTheme"),n.classList.add(o),i.classList.add(o)):(localStorage.setItem("Theme","lightTheme"),n.classList.add(r),i.classList.add(r))})),"darkTheme"===localStorage.getItem("Theme")&&(a.setAttribute("checked",!0),n.classList.add(o),i.classList.add(o))},"mZ/l":function(e,t,n){e.exports=n.p+"img/empty-page-optimaze.png"},"v+qO":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,i){var r,o,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="movie-card">\r\n    <img class="movie-poster" src='+u(typeof(o=null!=(o=d(n,"img")||(null!=t?d(t,"img"):t))?o:s)===c?o.call(l,{name:"img",hash:{},data:i,loc:{start:{line:5,column:34},end:{line:5,column:41}}}):o)+' alt="'+u(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:s)===c?o.call(l,{name:"title",hash:{},data:i,loc:{start:{line:5,column:47},end:{line:5,column:56}}}):o)+'" data-movie-id="'+u(typeof(o=null!=(o=d(n,"id")||(null!=t?d(t,"id"):t))?o:s)===c?o.call(l,{name:"id",hash:{},data:i,loc:{start:{line:5,column:73},end:{line:5,column:79}}}):o)+'">\r\n    <h1 class="movie-title">'+u(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:s)===c?o.call(l,{name:"title",hash:{},data:i,loc:{start:{line:6,column:28},end:{line:6,column:37}}}):o)+'</h1>\r\n    <p class="movie-info"> '+(null!=(r=d(n,"if").call(l,null!=t?d(t,"movieGenres"):t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i,loc:{start:{line:7,column:27},end:{line:7,column:81}}}))?r:"")+" | "+u(typeof(o=null!=(o=d(n,"releaseDate")||(null!=t?d(t,"releaseDate"):t))?o:s)===c?o.call(l,{name:"releaseDate",hash:{},data:i,loc:{start:{line:7,column:84},end:{line:7,column:99}}}):o)+"</p>\r\n</li>\r\n"},2:function(e,t,n,a,i){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(r=null!=(r=o(n,"movieGenres")||(null!=t?o(t,"movieGenres"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"movieGenres",hash:{},data:i,loc:{start:{line:7,column:46},end:{line:7,column:61}}}):r)},4:function(e,t,n,a,i){return"Genre"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var r;return"\x3c!-- Шаблон карточки фильмов --\x3e\r\n\r\n"+(null!=(r=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:0},end:{line:9,column:9}}}))?r:"")},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.59a1ff43f32ae43a5c76.js.map